{"version":3,"file":"Sidebar.js","sourceRoot":"","sources":["../../../../src/client/components/sidebar/Sidebar.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,cAAc,EAAE,MAAM,cAAc,CAAC;AAE9C,OAAO,EAAE,eAAe,EAAE,CAAC,EAAE,SAAS,EAAE,UAAU,EAAE,MAAM,KAAK,CAAC;AAChE,OAAO,EAAE,QAAQ,EAAE,MAAM,iBAAiB,CAAC;AAE3C,OAAO,YAAY,MAAM,6CAA6C,CAAC;AACvE,OAAO,EAAE,eAAe,EAAE,MAAM,iDAAiD,CAAC;AAGlF,OAAO,mCAAmC,CAAC;AAE3C,eAAe,eAAe,CAAC;IAC7B,IAAI,EAAE,SAAS;IAEf,KAAK,EAAE,MAIL;IAEF,KAAK,CAAC,MAAM,EAAE,EAAE,KAAK,EAAE;QACrB,MAAM,KAAK,GAAG,QAAQ,EAAE,CAAC;QACzB,MAAM,YAAY,GAAG,eAAe,EAAE,CAAC;QAEvC,MAAM,OAAO,GAAG,UAAU,EAAe,CAAC;QAE1C,SAAS,CAAC,GAAG,EAAE;YACb,gCAAgC;YAChC,cAAc,CACZ,GAAG,EAAE,CAAC,KAAK,CAAC,IAAI,EAChB,CAAC,IAAI,EAAQ,EAAE;gBACb,0EAA0E;gBAC1E,MAAM,iBAAiB,GAAG,QAAQ,CAAC,aAAa,CAC9C,uCAAuC,KAAK,CAAC,IAAI,GAAG,IAAI,IAAI,CAC7D,CAAC;gBAEF,IAAI,CAAC,iBAAiB;oBAAE,OAAO;gBAE/B,wCAAwC;gBACxC,MAAM,EAAE,GAAG,EAAE,UAAU,EAAE,MAAM,EAAE,aAAa,EAAE;gBAC9C,oEAAoE;gBACpE,OAAO,CAAC,KAAM,CAAC,qBAAqB,EAAE,CAAC;gBACzC,oDAAoD;gBACpD,MAAM,EAAE,GAAG,EAAE,oBAAoB,EAAE,MAAM,EAAE,uBAAuB,EAAE,GAClE,iBAAiB,CAAC,qBAAqB,EAAE,CAAC;gBAE5C,iEAAiE;gBACjE,IAAI,oBAAoB,GAAG,UAAU;oBACnC,oCAAoC;oBACpC,iBAAiB,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;gBACzC,oEAAoE;qBAC/D,IACH,oBAAoB,GAAG,uBAAuB;oBAC9C,UAAU,GAAG,aAAa;oBAE1B,uCAAuC;oBACvC,iBAAiB,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;YAC5C,CAAC,CACF,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,OAAO,GAAU,EAAE,CACjB,CAAC,CACC,OAAO,EACP;YACE,GAAG,EAAE,OAAO;YACZ,GAAG,EAAE,SAAS;YACd,EAAE,EAAE,SAAS;YACb,KAAK,EAAE,YAAY;YACnB,YAAY,EAAE,EAAE;SACjB,EACD;YACE,KAAK,CAAC,UAAU,EAAE,EAAE;YACpB,KAAK,CAAC,YAAY,EAAE,CAAC,YAAY,CAAC,KAAK,CAAC;gBACtC,CAAC,CAAC,YAAY,EAAE,EAAE,MAAM,EAAE,YAAY,CAAC,KAAK,EAAE,CAAC;YACjD,KAAK,CAAC,aAAa,EAAE,EAAE;SACxB,CACF,CAAC;IACN,CAAC;CACF,CAAC,CAAC","sourcesContent":["import type { Slot } from \"@vuepress/helper/client\";\nimport { watchImmediate } from \"@vueuse/core\";\nimport type { SlotsType, VNode } from \"vue\";\nimport { defineComponent, h, onMounted, shallowRef } from \"vue\";\nimport { useRoute } from \"vuepress/client\";\n\nimport SidebarLinks from \"@theme-hope/components/sidebar/SidebarLinks\";\nimport { useSidebarItems } from \"@theme-hope/composables/sidebar/useSidebarItems\";\nimport type { SidebarItemsSlotData } from \"@theme-hope/typings/slots\";\n\nimport \"../../styles/sidebar/sidebar.scss\";\n\nexport default defineComponent({\n  name: \"SideBar\",\n\n  slots: Object as SlotsType<{\n    sidebarItems?: Slot<SidebarItemsSlotData>;\n    sidebarTop?: Slot;\n    sidebarBottom?: Slot;\n  }>,\n\n  setup(_props, { slots }) {\n    const route = useRoute();\n    const sidebarItems = useSidebarItems();\n\n    const sidebar = shallowRef<HTMLElement>();\n\n    onMounted(() => {\n      // Scroll to active sidebar item\n      watchImmediate(\n        () => route.hash,\n        (hash): void => {\n          // Get the active sidebar item DOM, whose href equals to the current route\n          const activeSidebarItem = document.querySelector(\n            `.vp-sidebar a.vp-sidebar-link[href=\"${route.path}${hash}\"]`,\n          );\n\n          if (!activeSidebarItem) return;\n\n          // Get the top and height of the sidebar\n          const { top: sidebarTop, height: sidebarHeight } =\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            sidebar.value!.getBoundingClientRect();\n          // Get the top and height of the active sidebar item\n          const { top: activeSidebarItemTop, height: activeSidebarItemHeight } =\n            activeSidebarItem.getBoundingClientRect();\n\n          // When the active sidebar item overflows the top edge of sidebar\n          if (activeSidebarItemTop < sidebarTop)\n            // Scroll to the top edge of sidebar\n            activeSidebarItem.scrollIntoView(true);\n          // When the active sidebar item overflows the bottom edge of sidebar\n          else if (\n            activeSidebarItemTop + activeSidebarItemHeight >\n            sidebarTop + sidebarHeight\n          )\n            // Scroll to the bottom edge of sidebar\n            activeSidebarItem.scrollIntoView(false);\n        },\n      );\n    });\n\n    return (): VNode =>\n      h(\n        \"aside\",\n        {\n          ref: sidebar,\n          key: \"sidebar\",\n          id: \"sidebar\",\n          class: \"vp-sidebar\",\n          \"vp-sidebar\": \"\",\n        },\n        [\n          slots.sidebarTop?.(),\n          slots.sidebarItems?.(sidebarItems.value) ??\n            h(SidebarLinks, { config: sidebarItems.value }),\n          slots.sidebarBottom?.(),\n        ],\n      );\n  },\n});\n"]}