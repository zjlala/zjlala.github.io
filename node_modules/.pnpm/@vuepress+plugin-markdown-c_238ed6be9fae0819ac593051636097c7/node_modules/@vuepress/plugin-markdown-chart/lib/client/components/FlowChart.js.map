{"version":3,"file":"FlowChart.js","sources":["../../../src/client/utils/flowchart-presets/base.ts","../../../src/client/utils/flowchart-presets/ant.ts","../../../src/client/utils/flowchart-presets/pie.ts","../../../src/client/utils/flowchart-presets/vue.ts","../../../src/client/utils/flowchart-presets/index.ts","../../../src/client/components/FlowChart.ts"],"sourcesContent":["export default {\n  'x': 0,\n  'y': 0,\n  'line-width': 2,\n  'line-length': 40,\n  'text-margin': 8,\n  'font-size': 14,\n  'font-color': '#8DA1AC',\n  'line-color': '#8DA1AC',\n  'element-color': 'black',\n  'fill': 'white',\n  'yes-text': 'Yes',\n  'no-text': 'No',\n  'arrow-end': 'block',\n  'scale': 1,\n}\n","import base from './base.js'\n\nexport default {\n  ...base,\n\n  // Style symbol types\n  symbols: {\n    start: {\n      'class': 'start-element',\n      'font-color': '#fff',\n      'fill': '#595959',\n      'line-width': 0,\n    },\n    end: {\n      'class': 'end-element',\n      'font-color': '#fff',\n      'fill': '#595959',\n      'line-width': 0,\n    },\n    operation: {\n      'class': 'operation-element',\n      'font-color': '#fff',\n      'fill': '#1890ff',\n      'line-width': 0,\n    },\n    inputoutput: {\n      'class': 'inputoutput-element',\n      'font-color': '#fff',\n      'fill': '#1890ff',\n      'line-width': 0,\n    },\n    subroutine: {\n      'class': 'subroutine-element',\n      'font-color': '#fff',\n      'fill': '#FF485E',\n      'element-color': '#fff',\n      'line-color': 'red',\n    },\n    condition: {\n      'class': 'condition-element',\n      'font-color': '#fff',\n      'fill': '#FF485E',\n      'line-width': 0,\n    },\n    parallel: {\n      'class': 'parallel-element',\n      'font-color': '#fff',\n      'fill': '#1890ff',\n      'line-width': 0,\n    },\n  },\n}\n","import base from './base.js'\n\nexport default {\n  ...base,\n\n  // Style symbol types\n  'line-width': 1,\n  'symbols': {\n    start: {\n      'class': 'start-element',\n      'fill': '#ccc',\n      'line-color': '#5c6ac4',\n      'font-color': '#000',\n    },\n    end: {\n      'class': 'end-element',\n      'fill': '#ccc',\n      'line-color': '#5c6ac4',\n      'font-color': '#000',\n    },\n    operation: {\n      'class': 'operation-element',\n      'fill': '#f1f1f1',\n      'line-color': '#5c6ac4',\n      'font-color': '#000',\n    },\n    inputoutput: {\n      'class': 'inputoutput-element',\n      'fill': '#f1f1f1',\n      'line-color': '#5c6ac4',\n      'font-color': '#000',\n    },\n    subroutine: {\n      'class': 'subroutine-element',\n      'fill': '#f1f1f1',\n      'line-color': '#5c6ac4',\n      'font-color': '#000',\n    },\n    condition: {\n      'class': 'condition-element',\n      'fill': '#f1f1f1',\n      'line-color': '#5c6ac4',\n      'font-color': '#000',\n    },\n    parallel: {\n      'class': 'parallel-element',\n      'fill': '#f1f1f1',\n      'line-color': '#5c6ac4',\n      'font-color': '#000',\n    },\n  },\n}\n","import base from './base.js'\n\nexport default {\n  ...base,\n\n  // Style symbol types\n  symbols: {\n    start: {\n      'class': 'start-element',\n      'font-color': '#fff',\n      'fill': '#2F495F',\n      'line-width': 0,\n    },\n    end: {\n      'class': 'end-element',\n      'font-color': '#fff',\n      'fill': '#2F495F',\n      'line-width': 0,\n    },\n    operation: {\n      'class': 'operation-element',\n      'font-color': '#fff',\n      'fill': '#00BC7D',\n      'line-width': 0,\n    },\n    inputoutput: {\n      'class': 'inputoutput-element',\n      'font-color': '#fff',\n      'fill': '#EB4D5D',\n      'line-width': 0,\n    },\n    subroutine: {\n      'class': 'subroutine-element',\n      'font-color': '#fff',\n      'fill': '#937AC4',\n      'element-color': '#fff',\n      'line-color': 'red',\n    },\n    condition: {\n      'class': 'condition-element',\n      'font-color': '#fff',\n      'fill': '#FFB500',\n      'line-width': 0,\n    },\n    parallel: {\n      'class': 'parallel-element',\n      'font-color': '#fff',\n      'fill': '#2F495F',\n      'line-width': 0,\n    },\n  },\n}\n","/**\n * Forked from https://github.com/ulivz/vuepress-plugin-flowchart/tree/master/lib/presets\n *\n * MIT LICENSED\n */\n\nimport ant from './ant.js'\nimport pie from './pie.js'\nimport vue from './vue.js'\n\nexport const flowchartPresets = {\n  ant,\n  vue,\n  pie,\n}\n","import { LoadingIcon, decodeData } from '@vuepress/helper/client'\nimport { useDebounceFn, useEventListener } from '@vueuse/core'\nimport type { Chart } from 'flowchart.ts'\nimport type { PropType, VNode } from 'vue'\nimport {\n  defineComponent,\n  h,\n  nextTick,\n  onMounted,\n  onUnmounted,\n  ref,\n  shallowRef,\n  toRefs,\n  useId,\n  watch,\n} from 'vue'\nimport { onContentUpdated } from 'vuepress/client'\n\nimport { flowchartPresets } from '../utils/index.js'\n\nimport '../styles/flowchart.css'\n\nexport default defineComponent({\n  name: 'FlowChart',\n\n  props: {\n    /**\n     * Flowchart code content\n     *\n     * 流程图代码内容\n     */\n    code: { type: String, required: true },\n\n    /**\n     * Flowchart preset\n     *\n     * 流程图预设\n     */\n    preset: {\n      type: String as PropType<'ant' | 'pie' | 'vue'>,\n      default: 'vue',\n    },\n  },\n\n  setup(props) {\n    const id = useId()\n    const { code, preset } = toRefs(props)\n    const element = shallowRef<HTMLDivElement>()\n\n    const loaded = ref(false)\n    const scale = ref(1)\n\n    let flowchart: Chart | null = null\n\n    const getScale = (width: number): number =>\n      width < 419 ? 0.8 : width > 1280 ? 1 : 0.9\n\n    useEventListener(\n      'resize',\n      useDebounceFn(() => {\n        if (flowchart) {\n          const newScale = getScale(window.innerWidth)\n\n          if (scale.value !== newScale) {\n            scale.value = newScale\n\n            flowchart.draw(id, {\n              ...flowchartPresets[props.preset],\n              scale: newScale,\n            })\n          }\n        }\n      }, 100),\n    )\n\n    const destroyFlowChart = (): void => {\n      flowchart?.clean()\n      flowchart = null\n    }\n\n    const renderFlowChart = async (): Promise<void> => {\n      if (__VUEPRESS_SSR__) return\n\n      const { parse } = await import(\n        /* webpackChunkName: \"flowchart\" */ 'flowchart.ts'\n      )\n\n      flowchart = parse(decodeData(code.value))\n\n      // Update scale\n      scale.value = getScale(window.innerWidth)\n\n      loaded.value = true\n\n      // Draw svg to #id\n      flowchart.draw(id, {\n        ...flowchartPresets[props.preset],\n        scale: scale.value,\n      })\n    }\n\n    onContentUpdated(async (reason) => {\n      if (reason === 'mounted') await renderFlowChart()\n    })\n\n    onMounted(() => {\n      if (!__VUEPRESS_DEV__) return\n\n      watch(\n        [code, preset],\n        async () => {\n          destroyFlowChart()\n          await nextTick()\n          await renderFlowChart()\n        },\n        { flush: 'post' },\n      )\n    })\n\n    onUnmounted(destroyFlowChart)\n\n    return (): (VNode | null)[] => [\n      loaded.value\n        ? null\n        : h(LoadingIcon, { class: 'flowchart-loading', height: 192 }),\n      h('div', {\n        ref: element,\n        class: ['flowchart-wrapper', props.preset],\n        id,\n        style: {\n          display: loaded.value ? 'block' : 'none',\n        },\n      }),\n    ]\n  },\n})\n"],"names":["l","o","base","r","t","flowchartPresets","ant","vue","pie","FlowChart","defineComponent","props","id","useId","code","preset","toRefs","element","shallowRef","loaded","ref","scale","flowchart","getScale","width","useEventListener","useDebounceFn","newScale","destroyFlowChart","renderFlowChart","parse","decodeData","onContentUpdated","reason","onMounted","watch","nextTick","onUnmounted","h","LoadingIcon"],"mappings":"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"}