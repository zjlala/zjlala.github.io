import{redirectMap as D}from"@temp/redirect/map.js";import{entries as M,isLinkHttp as S}from"@vuepress/helper/client";import{usePreferredLanguages as $,watchImmediate as x}from"@vueuse/core";import{computed as C,onMounted as E}from"vue";import{useRoute as I,useRouter as L,useRouteLocale as j,useRoutePath as y,useData as z}from"vuepress/client";import{u as A,s as R}from"./useRedirectInfo-BzhIENgm.js";const B=/#.*$/u,F=(o,e=!1)=>(e?o.replace(B,""):o).replace(/\/(?:README\.md)?$/i,"/index.html").replace(/(?:\.(?:md|html))?$/,".html"),H=({autoLocale:o,config:e,defaultBehavior:p,defaultLocale:u,localeFallback:n})=>{const P=Object.entries(e),g=$(),d=I(),c=L(),w=j(),h=y(),b=C(()=>w.value==="/"),k=()=>{const t=h.value,l=c.getRoutes(),r=u&&l.some(({path:a})=>a===t.replace("/",u))?u:l.find(({path:a})=>t.split("/").length>=3&&a===t.replace(/^\/[^/]+\//,"/"))?.path;let s=null;e:for(const a of g.value)for(const[f,v]of P)if(v.includes(a)){if(n&&l.every(({path:m})=>m!==t.replace("/",m)))continue;s=f;break e}const i=r?d.fullPath.replace("/",r):null;if(s){const a=l.some(({path:m})=>t.replace("/",s)===m),f=d.fullPath.replace("/",s),v=a?f:p==="homepage"?s:p==="defaultLocale"&&i?i:f;c.replace(v)}else i?c.replace(i):h.value!=="/404.html"&&c.replace("/404.html")};x(h,t=>{for(const[l,r]of M(D))if(F(t.toLowerCase())===l.toLowerCase()){S(r)?window.open(r):c.replace(r);return}o&&b.value&&k()})},O=o=>{const{routeLocale:e,routePath:p}=z(),u=L(),n=A(o);E(()=>{n.value&&!R.value[e.value]&&(u.replace(p.value.replace(e.value,n.value.localePath)),R.value[e.value]=!0)})};export{O as a,H as s};
//# sourceMappingURL=setupRedirect-BBJERz7T.js.map
