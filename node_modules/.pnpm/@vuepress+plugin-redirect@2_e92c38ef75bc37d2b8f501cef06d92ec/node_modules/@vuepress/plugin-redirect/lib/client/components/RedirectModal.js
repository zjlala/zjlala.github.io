import{useScrollLock as y}from"@vueuse/core";import{defineComponent as k,ref as v,computed as g,h as e,watch as w,onMounted as j,nextTick as C,onBeforeUnmount as R,TransitionGroup as S}from"vue";import{useRouter as x,useData as L}from"vuepress/client";import"@vuepress/helper/transition/fade-in-scale-up.css";import"../styles/redirect-modal.css";import{u as M,s as d,a as f}from"../useRedirectInfo-BzhIENgm.js";import"@vuepress/helper/client";var P=k({name:"RedirectModal",props:{config:{type:Object,required:!0},locales:{type:Object,required:!0}},setup(n){const h=x(),{routeLocale:l,routePath:s}=L(),r=M(n.config),m=v(),t=y(m),o=v(!1),u=g(()=>{if(!r.value)return null;const{lang:c,localePath:b}=r.value,i=[n.locales[b],n.locales[l.value]];return{hint:i.map(({hint:a})=>a.replace("$1",c)),switch:i.map(({switch:a})=>a.replace("$1",c)).join(" / "),cancel:i.map(({cancel:a})=>a).join(" / "),remember:i.map(({remember:a})=>a).join(" / ")}}),p=()=>{d.value[l.value]=!0,o.value&&(f.value[l.value]=!0),t.value=!1};return w(s,()=>{t.value=!1}),j(async()=>{m.value=document.body,await C(),r.value&&!d.value[l.value]&&!f.value[l.value]&&(t.value=!0)}),R(()=>{t.value=!1}),()=>e(S,{name:"fade-in-scale-up"},()=>t.value?e("div",{key:"mask",class:"redirect-modal-mask"},e("div",{key:"popup",class:"redirect-modal-wrapper"},[e("div",{class:"redirect-modal-content"},u.value?.hint.map(c=>e("p",c))),e("div",{class:"redirect-modal-hint"},[e("input",{id:"remember-redirect",type:"checkbox",value:o.value,onChange:()=>{o.value=!o.value}}),e("label",{for:"remember-redirect"},u.value?.remember)]),e("button",{type:"button",class:"redirect-modal-action primary",onClick:()=>{p(),h.replace(s.value.replace(l.value,r.value.localePath))}},u.value?.switch),e("button",{type:"button",class:"redirect-modal-action",onClick:()=>{p()}},u.value?.cancel)])):null)}});export{P as default};
//# sourceMappingURL=RedirectModal.js.map
