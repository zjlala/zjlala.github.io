{"version":3,"file":"MdDemo.js","sources":["../../../src/client/components/MdDemo.ts"],"sourcesContent":["import { useEventListener, useResizeObserver, useToggle } from \"@vueuse/core\";\nimport type { SlotsType, VNode } from \"vue\";\nimport { defineComponent, h, ref, shallowRef } from \"vue\";\n\nimport \"../styles/md-demo.scss\";\n\nexport default defineComponent({\n  name: \"MdDemo\",\n\n  props: {\n    /**\n     * Markdown demo id\n     *\n     * Markdown 代码演示 id\n     */\n    id: {\n      type: String,\n      required: true,\n    },\n\n    /**\n     * Markdown demo title\n     *\n     * Markdown 演示标题\n     */\n    title: String,\n  },\n\n  slots: Object as SlotsType<{\n    default: () => VNode[];\n    code: () => VNode[];\n  }>,\n\n  setup(props, { slots }) {\n    const [isExpanded, toggleIsExpand] = useToggle(false);\n    const codeContainer = shallowRef<HTMLDivElement>();\n    const height = ref(\"0\");\n\n    let previousState: boolean | null = null;\n\n    useEventListener(\"beforeprint\", () => {\n      toggleIsExpand(true);\n    });\n\n    useEventListener(\"afterprint\", () => {\n      if (previousState !== null) {\n        toggleIsExpand(previousState);\n      }\n\n      previousState = null;\n    });\n\n    useResizeObserver(codeContainer, () => {\n      if (isExpanded.value) {\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        height.value = `${codeContainer.value!.clientHeight + 14}px`;\n      }\n    });\n\n    return (): VNode =>\n      h(\"div\", { class: \"vp-container vp-md-demo\", id: props.id }, [\n        h(\"div\", { class: \"vp-container-header\" }, [\n          h(\"button\", {\n            type: \"button\",\n            title: \"toggle\",\n            class: [\n              \"vp-md-demo-toggle-button\",\n              isExpanded.value ? \"down\" : \"end\",\n            ],\n            onClick: () => {\n              height.value = isExpanded.value\n                ? \"0\"\n                : // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                  `${codeContainer.value!.clientHeight + 14}px`;\n              toggleIsExpand();\n            },\n          }),\n          props.title\n            ? h(\n                \"div\",\n                { class: \"vp-container-title\" },\n                decodeURIComponent(props.title),\n              )\n            : null,\n        ]),\n\n        h(\"div\", { class: \"vp-md-demo-display\" }, slots.default()),\n\n        h(\n          \"div\",\n          {\n            class: \"vp-md-demo-code-wrapper\",\n            style: { height: height.value },\n          },\n          h(\n            \"div\",\n            {\n              ref: codeContainer,\n              class: \"vp-md-demo-codes\",\n            },\n            slots.code(),\n          ),\n        ),\n      ]);\n  },\n});\n"],"names":["MdDemo","defineComponent","props","slots","isExpanded","toggleIsExpand","useToggle","codeContainer","shallowRef","height","ref","previousState","useEventListener","useResizeObserver","h"],"mappings":"2LAMA,IAAAA,EAAeC,EAAgB,CAC7B,KAAM,SAEN,MAAO,CAML,GAAI,CACF,KAAM,OACN,SAAU,EACZ,EAOA,MAAO,MACT,EAEA,MAAO,OAKP,MAAMC,EAAO,CAAE,MAAAC,CAAM,EAAG,CACtB,KAAM,CAACC,EAAYC,CAAc,EAAIC,EAAU,EAAK,EAC9CC,EAAgBC,IAChBC,EAASC,EAAI,GAAG,EAEtB,IAAIC,EAAgC,KAEpC,OAAAC,EAAiB,cAAe,IAAM,CACpCP,EAAe,EAAI,CACrB,CAAC,EAEDO,EAAiB,aAAc,IAAM,CAC/BD,IAAkB,MACpBN,EAAeM,CAAa,EAG9BA,EAAgB,IAClB,CAAC,EAEDE,EAAkBN,EAAe,IAAM,CACjCH,EAAW,QAEbK,EAAO,MAAQ,GAAGF,EAAc,MAAO,aAAe,EAAE,KAE5D,CAAC,EAEM,IACLO,EAAE,MAAO,CAAE,MAAO,0BAA2B,GAAIZ,EAAM,EAAG,EAAG,CAC3DY,EAAE,MAAO,CAAE,MAAO,qBAAsB,EAAG,CACzCA,EAAE,SAAU,CACV,KAAM,SACN,MAAO,SACP,MAAO,CACL,2BACAV,EAAW,MAAQ,OAAS,KAC9B,EACA,QAAS,IAAM,CACbK,EAAO,MAAQL,EAAW,MACtB,IAEA,GAAGG,EAAc,MAAO,aAAe,EAAE,KAC7CF,EAAAA,CACF,CACF,CAAC,EACDH,EAAM,MACFY,EACE,MACA,CAAE,MAAO,oBAAqB,EAC9B,mBAAmBZ,EAAM,KAAK,CAChC,EACA,IACN,CAAC,EAEDY,EAAE,MAAO,CAAE,MAAO,oBAAqB,EAAGX,EAAM,QAAA,CAAS,EAEzDW,EACE,MACA,CACE,MAAO,0BACP,MAAO,CAAE,OAAQL,EAAO,KAAM,CAChC,EACAK,EACE,MACA,CACE,IAAKP,EACL,MAAO,kBACT,EACAJ,EAAM,KAAA,CACR,CACF,CACF,CAAC,CACL,CACF,CAAC"}