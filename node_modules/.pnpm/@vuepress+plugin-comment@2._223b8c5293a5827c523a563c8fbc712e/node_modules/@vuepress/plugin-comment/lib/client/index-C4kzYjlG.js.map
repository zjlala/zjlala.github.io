{"version":3,"file":"index-C4kzYjlG.js","sources":["../../src/client/helpers/comment.ts"],"sourcesContent":["import { isFunction } from '@vuepress/helper/client'\nimport { watchImmediate } from '@vueuse/core'\nimport type { App, MaybeRefOrGetter, Ref } from 'vue'\nimport { computed, inject, isRef, readonly, ref } from 'vue'\nimport type {\n  ArtalkOptions,\n  CommentOptions,\n  GiscusOptions,\n  TwikooOptions,\n  WalineOptions,\n} from '../../shared/index.js'\n\ndeclare const __VUEPRESS_DEV__: boolean\ndeclare const __COMMENT_OPTIONS__: CommentOptions\n\nconst commentOptions = __COMMENT_OPTIONS__\n\nconst comment = ref(commentOptions)\n\nconst commentSymbol = Symbol(__VUEPRESS_DEV__ ? 'comment' : '')\n\nconst defineCommentConfig = <T extends CommentOptions>(\n  options: MaybeRefOrGetter<T>,\n): void => {\n  if (isRef(options)) {\n    watchImmediate(options, (value) => {\n      comment.value = { ...commentOptions, ...value }\n    })\n  } else if (isFunction(options)) {\n    watchImmediate(computed(options), (value) => {\n      comment.value = { ...commentOptions, ...value }\n    })\n  } else {\n    comment.value = { ...commentOptions, ...options }\n  }\n}\n\nexport const useCommentOptions = <T extends CommentOptions>(): Ref<T> =>\n  inject(commentSymbol)!\n\nexport const defineArtalkConfig = defineCommentConfig<ArtalkOptions>\n\nexport const useArtalkOptions = useCommentOptions<ArtalkOptions>\n\nexport const defineGiscusConfig = defineCommentConfig<GiscusOptions>\n\nexport const useGiscusOptions = useCommentOptions<GiscusOptions>\n\nexport const defineTwikooConfig = defineCommentConfig<TwikooOptions>\n\nexport const useTwikooOptions = useCommentOptions<TwikooOptions>\n\nexport const defineWalineConfig = defineCommentConfig<WalineOptions>\n\nexport const useWalineOptions = useCommentOptions<WalineOptions>\n\nexport const injectCommentConfig = (app: App): void => {\n  app.provide(commentSymbol, readonly(comment))\n}\n"],"names":["commentOptions","comment","ref","commentSymbol","defineCommentConfig","options","isRef","watchImmediate","value","isFunction","computed","useCommentOptions","inject","defineArtalkConfig","useArtalkOptions","defineGiscusConfig","useGiscusOptions","defineTwikooConfig","useTwikooOptions","defineWalineConfig","useWalineOptions","injectCommentConfig","app","readonly"],"mappings":"gLAeA,MAAMA,EAAiB,oBAEjBC,EAAUC,EAAIF,CAAc,EAE5BG,EAAgB,OAAO,iBAAmB,UAAY,EAAE,EAExDC,EACJC,GACS,CACLC,EAAMD,CAAO,EACfE,EAAeF,EAAUG,GAAU,CACjCP,EAAQ,MAAQ,CAAE,GAAGD,EAAgB,GAAGQ,CAAM,CAChD,CAAC,EACQC,EAAWJ,CAAO,EAC3BE,EAAeG,EAASL,CAAO,EAAIG,GAAU,CAC3CP,EAAQ,MAAQ,CAAE,GAAGD,EAAgB,GAAGQ,CAAM,CAChD,CAAC,EAEDP,EAAQ,MAAQ,CAAE,GAAGD,EAAgB,GAAGK,CAAQ,CAEpD,EAEaM,EAAoB,IAC/BC,EAAOT,CAAa,EAETU,EAAqBT,EAErBU,EAAmBH,EAEnBI,EAAqBX,EAErBY,EAAmBL,EAEnBM,EAAqBb,EAErBc,EAAmBP,EAEnBQ,EAAqBf,EAErBgB,EAAmBT,EAEnBU,EAAuBC,GAAmB,CACrDA,EAAI,QAAQnB,EAAeoB,EAAStB,CAAO,CAAC,CAC9C"}