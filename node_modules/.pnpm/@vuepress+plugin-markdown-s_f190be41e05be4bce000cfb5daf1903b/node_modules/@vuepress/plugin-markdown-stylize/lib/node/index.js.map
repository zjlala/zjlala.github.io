{"version":3,"file":"index.js","sources":["../../src/node/prepareClientConfigFile.ts","../../src/node/markdownStylizePlugin.ts"],"sourcesContent":["import { getModulePath } from '@vuepress/helper'\nimport type { App } from 'vuepress'\n\nexport const prepareClientConfigFile = (\n  app: App,\n  { spoiler }: Record<string, unknown>,\n): Promise<string> =>\n  app.writeTemp(\n    `markdown-stylize/config.js`,\n    `\\\n${spoiler ? `import \"${getModulePath('@mdit/plugin-spoiler/style', import.meta)}\"\\n` : ''}\\n\n`,\n  )\n","import { align as alignPlugin } from '@mdit/plugin-align'\nimport { attrs as attrsPlugin } from '@mdit/plugin-attrs'\nimport { mark as markPlugin } from '@mdit/plugin-mark'\nimport { spoiler as spoilerPlugin } from '@mdit/plugin-spoiler'\nimport { stylize as stylizePlugin } from '@mdit/plugin-stylize'\nimport { sub as subPlugin } from '@mdit/plugin-sub'\nimport { sup as supPlugin } from '@mdit/plugin-sup'\nimport type { Plugin } from 'vuepress/core'\nimport type { MarkdownEnv } from 'vuepress/markdown'\nimport { isPlainObject } from 'vuepress/shared'\nimport type { MarkdownStylizePluginOptions } from './options.js'\nimport { prepareClientConfigFile } from './prepareClientConfigFile.js'\n\n/**\n * Markdown stylize plugin\n *\n * Markdown 样式化插件\n *\n * @param options - plugin options / 插件选项\n *\n * @example\n * ```ts\n * import { markdownStylizePlugin } from '@vuepress/plugin-markdown-stylize'\n *\n * export default {\n *   plugins: [\n *     markdownStylizePlugin({\n *       align: true,\n *       attrs: true,\n *       mark: true,\n *       spoiler: true,\n *       sub: true,\n *       sup: true,\n *     }),\n *   ],\n * }\n * ```\n */\nexport const markdownStylizePlugin = ({\n  attrs,\n  align,\n  custom,\n  mark,\n  spoiler,\n  sup,\n  sub,\n}: MarkdownStylizePluginOptions): Plugin => {\n  return {\n    name: '@vuepress/plugin-markdown-stylize',\n\n    extendsMarkdown: (md) => {\n      if (custom)\n        md.use(stylizePlugin, {\n          config: custom,\n          localConfigGetter: (env: MarkdownEnv) =>\n            env.frontmatter?.stylize || null,\n        })\n      if (attrs) md.use(attrsPlugin, isPlainObject(attrs) ? attrs : {})\n      if (align) md.use(alignPlugin)\n      if (mark) md.use(markPlugin)\n      if (spoiler) md.use(spoilerPlugin)\n      if (sub) md.use(subPlugin)\n      if (sup) md.use(supPlugin)\n    },\n\n    clientConfigFile: (app) => prepareClientConfigFile(app, { spoiler }),\n  }\n}\n"],"names":["prepareClientConfigFile","app","spoiler","getModulePath","markdownStylizePlugin","attrs","align","custom","mark","sup","sub","md","stylizePlugin","env","attrsPlugin","isPlainObject","alignPlugin","markPlugin","spoilerPlugin","subPlugin","supPlugin"],"mappings":"4YAGO,MAAMA,EAA0B,CACrCC,EACA,CAAE,QAAAC,CAAQ,IAEVD,EAAI,UACF,6BACA,GACFC,EAAU,WAAWC,EAAc,6BAA8B,WAAW,CAAC;AAAA,EAAQ,EAAE;AAAA;AAAA,CAEvF,EC0BWC,EAAwB,CAAC,CACpC,MAAAC,EACA,MAAAC,EACA,OAAAC,EACA,KAAAC,EACA,QAAAN,EACA,IAAAO,EACA,IAAAC,CACF,KACS,CACL,KAAM,oCAEN,gBAAkBC,GAAO,CACnBJ,GACFI,EAAG,IAAIC,EAAe,CACpB,OAAQL,EACR,kBAAoBM,GAClBA,EAAI,aAAa,SAAW,IAChC,CAAC,EACCR,GAAOM,EAAG,IAAIG,EAAaC,EAAcV,CAAK,EAAIA,EAAQ,EAAE,EAC5DC,GAAOK,EAAG,IAAIK,CAAW,EACzBR,GAAMG,EAAG,IAAIM,CAAU,EACvBf,GAASS,EAAG,IAAIO,CAAa,EAC7BR,GAAKC,EAAG,IAAIQ,CAAS,EACrBV,GAAKE,EAAG,IAAIS,CAAS,CAC3B,EAEA,iBAAmBnB,GAAQD,EAAwBC,EAAK,CAAE,QAAAC,CAAQ,CAAC,CACrE"}