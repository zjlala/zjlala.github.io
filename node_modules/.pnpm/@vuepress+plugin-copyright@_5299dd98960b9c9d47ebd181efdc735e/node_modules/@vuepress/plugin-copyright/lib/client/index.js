import{useLocale as S,isPlainObject as D,isString as $,removeEndingSlash as x,isLinkHttp as k}from"@vuepress/helper/client";import{useEventListener as E}from"@vueuse/core";import{computed as l,onMounted as w,watchEffect as A}from"vue";import{useFrontmatter as R,usePage as j}from"vuepress/client";const H=(a,h)=>{const f=S(h),o=R(),n=j(),s=l(()=>!!o.value.copy||o.value.copy!==!1&&a.global),r=l(()=>D(o.value.copy)?o.value.copy:null),d=l(()=>r.value?.disableCopy??a.disableCopy??!1),m=l(()=>s.value?r.value?.disableSelection??a.disableSelection??!1:!1),g=l(()=>s.value?r.value?.maxLength??a.maxLength??0:0),y=l(()=>r.value?.triggerLength??a.triggerLength??100),v=e=>e?`${x(k(e)?e:`https://${e}`)}${n.value.path}`:window.location.href,b=(e,t)=>{const{author:p,license:i,link:c}=f.value;return[e?p.replace(":author",e):"",t?i.replace(":license",t):"",c.replace(":link",v(a.canonical))].filter(u=>u).join(`
`)},L=()=>{if($(n.value.copyright))return n.value.copyright.replace(":link",v());const{author:e,license:t}=n.value.copyright??{};return b(e??a.author,t??a.license)},C=e=>{const t=getSelection();if(t){const p=t.getRangeAt(0);if(s.value){const i=p.toString().length;if(d.value||g.value&&i>g.value){e.preventDefault();return}if(i>=y.value){e.preventDefault();const c=L(),u=document.createElement("div");u.appendChild(t.getRangeAt(0).cloneContents()),e.clipboardData&&(e.clipboardData.setData("text/html",`${u.innerHTML}<hr><div class="copyright">${c.replace(/\\n/g,"<br>")}</div>`),e.clipboardData.setData("text/plain",`${t.getRangeAt(0).cloneContents().textContent||""}
------
${c}`))}}}};w(()=>{const e=document.querySelector("#app");E(e,"copy",C),A(()=>{e.style.userSelect=m.value?"none":"auto"})})};export{H as setupCopyright};
//# sourceMappingURL=index.js.map
