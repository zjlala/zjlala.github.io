import{startsWith as _,isLinkAbsolute as g,isLinkHttp as y}from"@vuepress/helper/client";import{watchImmediate as C}from"@vueuse/core";import{ref as v,h as o,defineComponent as L,computed as N,onMounted as I,TransitionGroup as O}from"vue";import{useRouter as E,useRoutePath as S}from"vuepress/client";import"@vuepress/helper/transition/fade-in-up.css";import"./styles/notice.css";import{NOTICE_OPTIONS as T}from"@internal/noticeOptions";const r=v(T),f=()=>r;__VUEPRESS_DEV__&&(import.meta.webpackHot||import.meta.hot)&&(__VUE_HMR_RUNTIME__.updateNoticeOptions=a=>{r.value=a});const d=()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"close-icon",viewBox:"0 0 1024 1024",fill:"currentColor","aria-label":"close icon"},o("path",{d:"m925.468 822.294-303.27-310.288L925.51 201.674c34.683-27.842 38.3-75.802 8.122-107.217-30.135-31.37-82.733-34.259-117.408-6.463L512.001 399.257 207.777 87.993C173.1 60.197 120.504 63.087 90.369 94.456c-30.179 31.415-26.561 79.376 8.122 107.217L401.8 512.005l-303.27 310.29c-34.724 27.82-38.34 75.846-8.117 107.194 30.135 31.437 82.729 34.327 117.408 6.486L512 624.756l304.177 311.22c34.68 27.84 87.272 24.95 117.408-6.487 30.223-31.348 26.56-79.375-8.118-107.195z"}));d.displayName="CloseIcon";const H=L({name:"Notice",setup(){const a=E(),u=S(),h=f(),i=v(!1),e=N(()=>{const t=h.value.find(c=>"match"in c?new RegExp(c.match).test(u.value):_(u.value,c.path));if(!t)return null;const{noticeKey:n,actions:s=[],title:p="",content:m="",...w}=t;return{...w,actions:s,title:p,content:m,key:n?`notice-${n}`:`notice:${p}${m}`}}),l=()=>{i.value=!1,e.value&&(e.value.showOnce?localStorage:sessionStorage).setItem(e.value.key,"true")},k=t=>{t&&(g(t)?a.push(t):y(t)&&window.open(t)),l()};return I(()=>{C(e,()=>{if(e.value){const t=(e.value.showOnce?localStorage:sessionStorage).getItem(e.value.key);i.value=!t}})}),()=>o(O,{name:"fade-in-up"},()=>e.value&&i.value?[e.value.fullscreen?o("div",{key:"mask",class:"vp-notice-mask",onClick:()=>{e.value.confirm||l()}}):null,o("div",{key:"popup",class:["vp-notice-wrapper",{fullscreen:e.value.fullscreen}]},[o("header",{class:"vp-notice-title"},[e.value.confirm?null:o(d,{onClick:l}),o("span",{innerHTML:e.value.title})]),o("div",{class:"vp-notice-content",innerHTML:e.value.content}),o("div",{class:"vp-notice-footer"},e.value.actions.map(({text:t,link:n,type:s=""})=>o("button",{type:"button",class:["vp-notice-footer-action",s],onClick:()=>{k(n)},innerHTML:t})))])]:[])}});export{H as N,r as n,f as u};
//# sourceMappingURL=Notice-D-vUrWEH.js.map
