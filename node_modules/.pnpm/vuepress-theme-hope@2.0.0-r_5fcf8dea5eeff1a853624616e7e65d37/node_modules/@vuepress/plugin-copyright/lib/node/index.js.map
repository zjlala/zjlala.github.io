{"version":3,"file":"index.js","sources":["../../src/node/locales.ts","../../src/node/copyrightPlugin.ts"],"sourcesContent":["import type { DefaultLocaleInfo } from '@vuepress/helper'\nimport type { CopyrightPluginLocaleData } from '../shared/index.js'\n\n/**\n * Default locale info for copyright plugin\n *\n * 版权插件的默认多语言信息\n */\nexport const copyrightLocaleInfo: DefaultLocaleInfo<CopyrightPluginLocaleData> =\n  [\n    [\n      ['en', 'en-US'],\n      {\n        author: 'Copyright by :author',\n        license: 'License under :license',\n        link: ':link',\n      },\n    ],\n    [\n      ['zh', 'zh-CN', 'zh-Hans'],\n      {\n        author: '著作权归:author所有',\n        license: '基于:license协议',\n        link: '原文链接：:link',\n      },\n    ],\n    [\n      ['zh-TW', 'zh-Hant'],\n      {\n        author: '著作權歸:author所有',\n        license: '基於:license協議',\n        link: '原文鏈接：:link',\n      },\n    ],\n    [\n      ['ru', 'ru-RU'],\n      {\n        author: 'Авторские права :author',\n        license: 'Лицензия :license',\n        link: ':link',\n      },\n    ],\n    [\n      ['uk', 'uk-UA'],\n      {\n        author: 'Авторські права :author',\n        license: 'Ліцензія :license',\n        link: ':link',\n      },\n    ],\n    [\n      ['vi', 'vi-VN'],\n      {\n        author: 'Bản quyền thuộc về :author',\n        license: 'Cấp phép theo :license',\n        link: ':link',\n      },\n    ],\n    [\n      ['pt-BR'],\n      {\n        author: 'Direitos autorais de :author',\n        license: 'Licenciado sob :license',\n        link: ':link',\n      },\n    ],\n    [\n      ['pl', 'pl-PL'],\n      {\n        author: 'Prawa autorskie :author',\n        license: 'Licencja :license',\n        link: ':link',\n      },\n    ],\n    [\n      ['sk', 'sk-SK'],\n      {\n        author: 'Autorské práva :author',\n        license: 'Licencia :license',\n        link: ':link',\n      },\n    ],\n    [\n      ['fr', 'fr-FR'],\n      {\n        author: 'Copyright par :author',\n        license: 'Sous licence :license',\n        link: ':link',\n      },\n    ],\n    [\n      ['es', 'es-ES'],\n      {\n        author: 'Derechos de autor :author',\n        license: 'Licencia :license',\n        link: ':link',\n      },\n    ],\n    [\n      ['ja', 'ja-JP'],\n      {\n        author: '著作権者 :author',\n        license: ':license ライセンスに基づく',\n        link: ':link',\n      },\n    ],\n    [\n      ['tr', 'tr-TR'],\n      {\n        author: 'Telif hakkı sahibi :author',\n        license: 'Lisans :license',\n        link: ':link',\n      },\n    ],\n    [\n      ['ko', 'ko-KR'],\n      {\n        author: '저작권자 :author',\n        license: ':license 라이선스에 따라',\n        link: ':link',\n      },\n    ],\n    [\n      ['fi', 'fi-FI'],\n      {\n        author: 'Tekijänoikeus :author',\n        license: 'Lisenssi :license',\n        link: ':link',\n      },\n    ],\n    [\n      ['de', 'de-DE'],\n      {\n        author: 'Copyright by :author',\n        license: 'Lizenziert unter :license',\n        link: ':link',\n      },\n    ],\n    [\n      ['hu', 'hu-HU'],\n      {\n        author: 'Szerzői jog :author',\n        license: 'Licenc: :license',\n        link: ':link',\n      },\n    ],\n    [\n      ['id', 'id-ID'],\n      {\n        author: 'Hak cipta oleh :author',\n        license: 'Di bawah lisensi :license',\n        link: ':link',\n      },\n    ],\n    [\n      ['nl', 'nl-NL'],\n      {\n        author: 'Auteursrecht van :author',\n        license: 'Licentie onder :license',\n        link: ':link',\n      },\n    ],\n  ]\n","import {\n  Logger,\n  addViteSsrNoExternal,\n  getFullLocaleConfig,\n} from '@vuepress/helper'\nimport type { Page, PluginFunction } from 'vuepress/core'\nimport { getDirname, path } from 'vuepress/utils'\nimport type {\n  CopyrightInfoData,\n  CopyrightPluginPageData,\n} from '../shared/index.js'\nimport { copyrightLocaleInfo } from './locales.js'\nimport type { CopyrightPluginOptions } from './options.js'\n\nconst PLUGIN_NAME = '@vuepress/plugin-copyright'\n\nexport const logger = new Logger(PLUGIN_NAME)\n\nconst __dirname = import.meta.dirname || getDirname(import.meta.url)\n\n/**\n * Copyright plugin\n *\n * 版权插件\n *\n * @param options - Plugin options / 插件选项\n *\n * @example\n * ```ts\n * import { copyrightPlugin } from '@vuepress/plugin-copyright'\n *\n * export default {\n *   plugins: [\n *     copyrightPlugin({\n *       author: 'Your Name',\n *       license: 'MIT',\n *       global: true,\n *     }),\n *   ],\n * }\n * ```\n */\nexport const copyrightPlugin =\n  (options: CopyrightPluginOptions = {}): PluginFunction =>\n  (app) => {\n    if (app.env.isDebug) logger.info('Options:', options)\n\n    const {\n      canonical,\n      author = '',\n      authorGetter,\n      license = '',\n      licenseGetter,\n      copyrightGetter,\n      disableCopy = false,\n      disableSelection = false,\n      global = false,\n      triggerLength = 100,\n      maxLength = 0,\n    } = options\n\n    const locales = getFullLocaleConfig({\n      app,\n      name: PLUGIN_NAME,\n      default: copyrightLocaleInfo,\n      config: options.locales,\n    })\n\n    return {\n      name: PLUGIN_NAME,\n\n      define: (): Record<string, unknown> => ({\n        __COPYRIGHT_OPTIONS__: {\n          canonical: canonical || '',\n          author: author || '',\n          license: license || '',\n          global,\n          disableCopy,\n          disableSelection,\n          triggerLength,\n          maxLength,\n        },\n        __COPYRIGHT_LOCALES__: locales,\n      }),\n\n      extendsPage: (page: Page<Partial<CopyrightPluginPageData>>): void => {\n        const authorText = authorGetter?.(page) ?? author\n        const licenseText = licenseGetter?.(page) ?? license\n        const copyright = copyrightGetter?.(page)\n\n        if (copyright) {\n          page.data.copyright = copyright\n        } else {\n          const hasDifferentAuthor = authorText && authorText !== author\n          const hasDifferentLicense = licenseText && licenseText !== license\n\n          if (hasDifferentAuthor || hasDifferentLicense) {\n            const copyrightInfo: CopyrightInfoData = {}\n\n            if (hasDifferentAuthor) copyrightInfo.author = authorText\n            if (hasDifferentLicense) copyrightInfo.license = licenseText\n            page.data.copyright = copyrightInfo\n          }\n        }\n      },\n\n      extendsBundlerOptions: (bundlerOptions: unknown): void => {\n        addViteSsrNoExternal(bundlerOptions, app, '@vuepress/helper')\n      },\n\n      clientConfigFile: path.resolve(__dirname, '../client/config.js'),\n    }\n  }\n"],"names":["copyrightLocaleInfo","PLUGIN_NAME","logger","Logger","__dirname","getDirname","copyrightPlugin","options","app","canonical","author","authorGetter","license","licenseGetter","copyrightGetter","disableCopy","disableSelection","global","triggerLength","maxLength","locales","getFullLocaleConfig","page","authorText","licenseText","copyright","hasDifferentAuthor","hasDifferentLicense","copyrightInfo","bundlerOptions","addViteSsrNoExternal","path"],"mappings":"mJAQO,MAAMA,EACX,CACE,CACE,CAAC,KAAM,OAAO,EACd,CACE,OAAQ,uBACR,QAAS,yBACT,KAAM,OACR,CACF,EACA,CACE,CAAC,KAAM,QAAS,SAAS,EACzB,CACE,OAAQ,gBACR,QAAS,eACT,KAAM,YACR,CACF,EACA,CACE,CAAC,QAAS,SAAS,EACnB,CACE,OAAQ,gBACR,QAAS,eACT,KAAM,YACR,CACF,EACA,CACE,CAAC,KAAM,OAAO,EACd,CACE,OAAQ,0BACR,QAAS,oBACT,KAAM,OACR,CACF,EACA,CACE,CAAC,KAAM,OAAO,EACd,CACE,OAAQ,0BACR,QAAS,oBACT,KAAM,OACR,CACF,EACA,CACE,CAAC,KAAM,OAAO,EACd,CACE,OAAQ,6BACR,QAAS,yBACT,KAAM,OACR,CACF,EACA,CACE,CAAC,OAAO,EACR,CACE,OAAQ,+BACR,QAAS,0BACT,KAAM,OACR,CACF,EACA,CACE,CAAC,KAAM,OAAO,EACd,CACE,OAAQ,0BACR,QAAS,oBACT,KAAM,OACR,CACF,EACA,CACE,CAAC,KAAM,OAAO,EACd,CACE,OAAQ,yBACR,QAAS,oBACT,KAAM,OACR,CACF,EACA,CACE,CAAC,KAAM,OAAO,EACd,CACE,OAAQ,wBACR,QAAS,wBACT,KAAM,OACR,CACF,EACA,CACE,CAAC,KAAM,OAAO,EACd,CACE,OAAQ,4BACR,QAAS,oBACT,KAAM,OACR,CACF,EACA,CACE,CAAC,KAAM,OAAO,EACd,CACE,OAAQ,eACR,QAAS,qBACT,KAAM,OACR,CACF,EACA,CACE,CAAC,KAAM,OAAO,EACd,CACE,OAAQ,6BACR,QAAS,kBACT,KAAM,OACR,CACF,EACA,CACE,CAAC,KAAM,OAAO,EACd,CACE,OAAQ,eACR,QAAS,oBACT,KAAM,OACR,CACF,EACA,CACE,CAAC,KAAM,OAAO,EACd,CACE,OAAQ,wBACR,QAAS,oBACT,KAAM,OACR,CACF,EACA,CACE,CAAC,KAAM,OAAO,EACd,CACE,OAAQ,uBACR,QAAS,4BACT,KAAM,OACR,CACF,EACA,CACE,CAAC,KAAM,OAAO,EACd,CACE,OAAQ,sBACR,QAAS,mBACT,KAAM,OACR,CACF,EACA,CACE,CAAC,KAAM,OAAO,EACd,CACE,OAAQ,yBACR,QAAS,4BACT,KAAM,OACR,CACF,EACA,CACE,CAAC,KAAM,OAAO,EACd,CACE,OAAQ,2BACR,QAAS,0BACT,KAAM,OACR,CACF,CACF,ECpJIC,EAAc,6BAEPC,EAAS,IAAIC,EAAOF,CAAW,EAEtCG,EAAY,YAAY,SAAWC,EAAW,YAAY,GAAG,EAwBtDC,EACX,CAACC,EAAkC,KAClCC,GAAQ,CACHA,EAAI,IAAI,SAASN,EAAO,KAAK,WAAYK,CAAO,EAEpD,KAAM,CACJ,UAAAE,EACA,OAAAC,EAAS,GACT,aAAAC,EACA,QAAAC,EAAU,GACV,cAAAC,EACA,gBAAAC,EACA,YAAAC,EAAc,GACd,iBAAAC,EAAmB,GACnB,OAAAC,EAAS,GACT,cAAAC,EAAgB,IAChB,UAAAC,EAAY,CACd,EAAIZ,EAEEa,EAAUC,EAAoB,CAClC,IAAAb,EACA,KAAMP,EACN,QAASD,EACT,OAAQO,EAAQ,OAClB,CAAC,EAED,MAAO,CACL,KAAMN,EAEN,OAAQ,KAAgC,CACtC,sBAAuB,CACrB,UAAWQ,GAAa,GACxB,OAAQC,GAAU,GAClB,QAASE,GAAW,GACpB,OAAAK,EACA,YAAAF,EACA,iBAAAC,EACA,cAAAE,EACA,UAAAC,CACF,EACA,sBAAuBC,CACzB,GAEA,YAAcE,GAAuD,CACnE,MAAMC,EAAaZ,IAAeW,CAAI,GAAKZ,EACrCc,EAAcX,IAAgBS,CAAI,GAAKV,EACvCa,EAAYX,IAAkBQ,CAAI,EAExC,GAAIG,EACFH,EAAK,KAAK,UAAYG,MACjB,CACL,MAAMC,EAAqBH,GAAcA,IAAeb,EAClDiB,EAAsBH,GAAeA,IAAgBZ,EAE3D,GAAIc,GAAsBC,EAAqB,CAC7C,MAAMC,EAAmC,CAAA,EAErCF,IAAoBE,EAAc,OAASL,GAC3CI,IAAqBC,EAAc,QAAUJ,GACjDF,EAAK,KAAK,UAAYM,CACxB,CACF,CACF,EAEA,sBAAwBC,GAAkC,CACxDC,EAAqBD,EAAgBrB,EAAK,kBAAkB,CAC9D,EAEA,iBAAkBuB,EAAK,QAAQ3B,EAAW,qBAAqB,CACjE,CACF"}