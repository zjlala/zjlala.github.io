{"version":3,"file":"KotlinPlayground.js","sources":["../../../src/client/components/KotlinPlayground.ts"],"sourcesContent":["import { decodeData, useDarkMode } from \"@vuepress/helper/client\";\nimport { watchImmediate } from \"@vueuse/core\";\nimport type { VNode } from \"vue\";\nimport { computed, defineComponent, h, onMounted, shallowRef } from \"vue\";\n\nimport \"../styles/kotlin-playground.scss\";\n\nexport default defineComponent({\n  name: \"KotlinPlayground\",\n\n  props: {\n    /**\n     * Playground file data\n     *\n     * 演示文件数据\n     */\n    files: {\n      type: String,\n      required: true,\n    },\n\n    /**\n     * Playground title\n     *\n     * 演示标题\n     */\n    title: String,\n\n    /**\n     * Playground settings\n     *\n     * 演示设置\n     */\n    settings: String,\n  },\n\n  setup(props) {\n    const isDarkMode = useDarkMode();\n\n    const kotlinPlayground = shallowRef<HTMLDivElement>();\n\n    const files = computed(\n      () => JSON.parse(decodeData(props.files)) as string[],\n    );\n\n    const settings = computed(() => ({\n      theme: isDarkMode.value ? \"darcula\" : \"default\",\n      ...(JSON.parse(decodeURIComponent(props.settings ?? \"{}\")) as Record<\n        string,\n        string\n      >),\n    }));\n\n    const renderPlayground = async (): Promise<void> => {\n      if (__VUEPRESS_SSR__) return;\n\n      const { default: playground } = await import(\n        /* webpackChunkName: \"kotlin-playground\" */ \"kotlin-playground\"\n      );\n\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      playground(kotlinPlayground.value!);\n    };\n\n    onMounted(() => {\n      watchImmediate(isDarkMode, () => renderPlayground(), {\n        flush: \"post\",\n      });\n    });\n\n    return (): VNode =>\n      h(\"div\", { class: \"kotlin-playground-wrapper\" }, [\n        props.title\n          ? h(\"div\", { class: \"header\" }, decodeURIComponent(props.title))\n          : null,\n        h(\n          \"div\",\n          {\n            class: \"kotlin-playground-container\",\n            key: isDarkMode.value ? \"dark\" : \"light\",\n          },\n\n          h(\n            \"div\",\n            {\n              class: \"kotlin-playground\",\n              ref: kotlinPlayground,\n              ...settings.value,\n            },\n            [\n              h(\"pre\", files.value[0]),\n              // Hidden dependency\n              files.value.length > 1\n                ? files.value.map((content, index) =>\n                    index === 0\n                      ? null\n                      : h(\n                          \"textarea\",\n                          { class: \"hidden-dependency\", readonly: \"\" },\n                          content,\n                        ),\n                  )\n                : null,\n            ],\n          ),\n        ),\n      ]);\n  },\n});\n"],"names":["KotlinPlayground","defineComponent","props","isDarkMode","useDarkMode","kotlinPlayground","shallowRef","files","computed","decodeData","settings","renderPlayground","playground","onMounted","watchImmediate","h","content","index"],"mappings":"uPAOA,IAAAA,EAAeC,EAAgB,CAC7B,KAAM,mBAEN,MAAO,CAML,MAAO,CACL,KAAM,OACN,SAAU,EACZ,EAOA,MAAO,OAOP,SAAU,MACZ,EAEA,MAAMC,EAAO,CACX,MAAMC,EAAaC,IAEbC,EAAmBC,EAAAA,EAEnBC,EAAQC,EACZ,IAAM,KAAK,MAAMC,EAAWP,EAAM,KAAK,CAAC,CAC1C,EAEMQ,EAAWF,EAAS,KAAO,CAC/B,MAAOL,EAAW,MAAQ,UAAY,UACtC,GAAI,KAAK,MAAM,mBAAmBD,EAAM,UAAY,IAAI,CAAC,CAI3D,EAAE,EAEIS,EAAmB,SAA2B,CAClD,GAAI,iBAAkB,OAEtB,KAAM,CAAE,QAASC,CAAW,EAAI,KAAM,QACQ,mBAC9C,EAGAA,EAAWP,EAAiB,KAAM,CACpC,EAEA,OAAAQ,EAAU,IAAM,CACdC,EAAeX,EAAY,IAAMQ,IAAoB,CACnD,MAAO,MACT,CAAC,CACH,CAAC,EAEM,IACLI,EAAE,MAAO,CAAE,MAAO,2BAA4B,EAAG,CAC/Cb,EAAM,MACFa,EAAE,MAAO,CAAE,MAAO,QAAS,EAAG,mBAAmBb,EAAM,KAAK,CAAC,EAC7D,KACJa,EACE,MACA,CACE,MAAO,8BACP,IAAKZ,EAAW,MAAQ,OAAS,OACnC,EAEAY,EACE,MACA,CACE,MAAO,oBACP,IAAKV,EACL,GAAGK,EAAS,KACd,EACA,CACEK,EAAE,MAAOR,EAAM,MAAM,CAAC,CAAC,EAEvBA,EAAM,MAAM,OAAS,EACjBA,EAAM,MAAM,IAAI,CAACS,EAASC,IACxBA,IAAU,EACN,KACAF,EACE,WACA,CAAE,MAAO,oBAAqB,SAAU,EAAG,EAC3CC,CACF,CACN,EACA,IACN,CACF,CACF,CACF,CAAC,CACL,CACF,CAAC"}