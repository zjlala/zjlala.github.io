{"version":3,"file":"SandPack.js","sources":["../../../src/client/components/SandPack.ts"],"sourcesContent":["import {\n  LoadingIcon,\n  decodeData,\n  deepAssign,\n  useDarkMode,\n} from \"@vuepress/helper/client\";\nimport NoopComponent from \"@vuepress/helper/noopComponent\";\nimport type {\n  SandpackFiles,\n  SandpackOptions,\n  SandpackPredefinedTemplate,\n  SandpackSetup,\n  SandpackThemeProp,\n} from \"sandpack-vue3\";\nimport type { PropType, VNode } from \"vue\";\nimport { computed, defineAsyncComponent, defineComponent, h } from \"vue\";\n\nimport { useSandpackConfig } from \"../helpers/index.js\";\n\nimport \"../styles/sandpack.scss\";\n\nconst getSandpackFiles = (files: string): SandpackFiles =>\n  JSON.parse(decodeData(files)) as SandpackFiles;\n\nconst getSandpackOptions = (options: string): SandpackOptions =>\n  JSON.parse(decodeData(options)) as SandpackOptions;\n\nconst getSandpackCustomSetup = (customSetup: string): SandpackSetup =>\n  JSON.parse(decodeData(customSetup)) as SandpackSetup;\n\nconst SandPackVue3 = defineAsyncComponent({\n  loader: () =>\n    __VUEPRESS_SSR__\n      ? Promise.resolve(NoopComponent)\n      : import(\"sandpack-vue3\").then(({ Sandpack }) => Sandpack),\n  loadingComponent: LoadingIcon,\n});\n\nexport default defineComponent({\n  name: \"SandPack\",\n\n  props: {\n    /**\n     * Sandpack file data\n     *\n     * 演示文件数据\n     */\n    files: {\n      type: String,\n      required: true,\n    },\n\n    /**\n     * Sandpack title\n     *\n     * 演示标题\n     */\n    title: String,\n\n    /**\n     * Sandpack template\n     *\n     * 演示工程模板\n     */\n    template: String as PropType<SandpackPredefinedTemplate | undefined>,\n\n    /**\n     * Sandpack options\n     *\n     * 演示设置\n     */\n    options: String,\n\n    /**\n     * Sandpack customSetup\n     *\n     * 自定义设置\n     */\n    customSetup: String,\n\n    /**\n     * Theme\n     *\n     * 主题\n     */\n    theme: String as PropType<SandpackThemeProp | undefined>,\n\n    /**\n     * RTL layout\n     *\n     * RTL 布局\n     */\n    rtl: Boolean,\n  },\n\n  setup(props) {\n    const isDarkMode = useDarkMode();\n    const sandpackConfig = useSandpackConfig();\n\n    const options = computed(() =>\n      deepAssign(\n        {},\n        sandpackConfig.options,\n        getSandpackOptions(props.options ?? \"{}\"),\n      ),\n    );\n    const template = computed(() => props.template ?? sandpackConfig.template);\n    const theme = computed(\n      () => props.theme ?? (isDarkMode.value ? \"dark\" : \"light\"),\n    );\n    const customSetup = computed(() =>\n      deepAssign(\n        {},\n        sandpackConfig.customSetup,\n        getSandpackCustomSetup(props.customSetup ?? \"{}\"),\n      ),\n    );\n\n    return (): (VNode | null)[] => [\n      h(\"div\", { class: \"vp-container sandpack-wrapper\" }, [\n        props.title\n          ? h(\n              \"div\",\n              { class: \"vp-container-header\" },\n              h(\n                \"div\",\n                { class: \"vp-container-title\" },\n                decodeURIComponent(props.title),\n              ),\n            )\n          : null,\n        h(\n          \"div\",\n          { class: \"sandpack-container\" },\n          h(SandPackVue3, {\n            template: template.value,\n            theme: theme.value,\n            files: getSandpackFiles(props.files),\n            options: options.value,\n            customSetup: customSetup.value,\n            rtl: props.rtl,\n          }),\n        ),\n      ]),\n    ];\n  },\n});\n"],"names":["getSandpackFiles","files","decodeData","getSandpackOptions","options","getSandpackCustomSetup","customSetup","SandPackVue3","defineAsyncComponent","NoopComponent","Sandpack","LoadingIcon","SandPack","defineComponent","props","isDarkMode","useDarkMode","sandpackConfig","useSandpackConfig","computed","deepAssign","template","theme","h"],"mappings":"sTAqBA,MAAMA,EAAoBC,GACxB,KAAK,MAAMC,EAAWD,CAAK,CAAC,EAExBE,EAAsBC,GAC1B,KAAK,MAAMF,EAAWE,CAAO,CAAC,EAE1BC,EAA0BC,GAC9B,KAAK,MAAMJ,EAAWI,CAAW,CAAC,EAE9BC,EAAeC,EAAqB,CACxC,OAAQ,IACN,iBACI,QAAQ,QAAQC,CAAa,EAC7B,OAAO,eAAe,EAAE,KAAK,CAAC,CAAE,SAAAC,CAAS,IAAMA,CAAQ,EAC7D,iBAAkBC,CACpB,CAAC,EAED,IAAAC,EAAeC,EAAgB,CAC7B,KAAM,WAEN,MAAO,CAML,MAAO,CACL,KAAM,OACN,SAAU,EACZ,EAOA,MAAO,OAOP,SAAU,OAOV,QAAS,OAOT,YAAa,OAOb,MAAO,OAOP,IAAK,OACP,EAEA,MAAMC,EAAO,CACX,MAAMC,EAAaC,EAAAA,EACbC,EAAiBC,IAEjBd,EAAUe,EAAS,IACvBC,EACE,CAAA,EACAH,EAAe,QACfd,EAAmBW,EAAM,SAAW,IAAI,CAC1C,CACF,EACMO,EAAWF,EAAS,IAAML,EAAM,UAAYG,EAAe,QAAQ,EACnEK,EAAQH,EACZ,IAAML,EAAM,QAAUC,EAAW,MAAQ,OAAS,QACpD,EACMT,EAAca,EAAS,IAC3BC,EACE,CAAA,EACAH,EAAe,YACfZ,EAAuBS,EAAM,aAAe,IAAI,CAClD,CACF,EAEA,MAAO,IAAwB,CAC7BS,EAAE,MAAO,CAAE,MAAO,+BAAgC,EAAG,CACnDT,EAAM,MACFS,EACE,MACA,CAAE,MAAO,qBAAsB,EAC/BA,EACE,MACA,CAAE,MAAO,oBAAqB,EAC9B,mBAAmBT,EAAM,KAAK,CAChC,CACF,EACA,KACJS,EACE,MACA,CAAE,MAAO,oBAAqB,EAC9BA,EAAEhB,EAAc,CACd,SAAUc,EAAS,MACnB,MAAOC,EAAM,MACb,MAAOtB,EAAiBc,EAAM,KAAK,EACnC,QAASV,EAAQ,MACjB,YAAaE,EAAY,MACzB,IAAKQ,EAAM,GACb,CAAC,CACH,CACF,CAAC,CACH,CACF,CACF,CAAC"}