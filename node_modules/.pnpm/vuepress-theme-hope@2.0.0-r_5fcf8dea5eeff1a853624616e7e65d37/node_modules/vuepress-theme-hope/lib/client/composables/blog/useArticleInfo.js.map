{"version":3,"file":"useArticleInfo.js","sourceRoot":"","sources":["../../../../src/client/composables/blog/useArticleInfo.ts"],"names":[],"mappings":"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","sourcesContent":["import { getDate } from \"@vuepress/helper/client\";\nimport {\n  getReadingTimeLocale,\n  useReadingTimeLocaleConfig,\n} from \"@vuepress/plugin-reading-time/client\";\nimport type { ComputedRef, Ref } from \"vue\";\nimport { computed, toRef } from \"vue\";\n\nimport type { PageInfoProps } from \"@theme-hope/components/info/PageInfo\";\nimport { useBlogOptions } from \"@theme-hope/composables/blog/useBlogOptions\";\nimport { useCategoryMap } from \"@theme-hope/composables/blog/useCategoryMap\";\nimport { useTagMap } from \"@theme-hope/composables/blog/useTagMap\";\nimport { useThemeLocale } from \"@theme-hope/composables/useTheme\";\nimport type { PageCategory, PageTag } from \"@theme-hope/utils/info/typings\";\n\nimport type {\n  ArticleInfoData,\n  AuthorInfo,\n  PageInfoType,\n} from \"../../../shared/index.js\";\nimport { getAuthor, getCategory, getTag } from \"../../../shared/index.js\";\n\nexport type AuthorRef = ComputedRef<AuthorInfo[]>;\n\nexport const useArticleAuthor = (info: Ref<ArticleInfoData>): AuthorRef => {\n  const themeLocale = useThemeLocale();\n\n  return computed(() => {\n    const { [\"author\"]: author } = info.value;\n\n    if (author) return getAuthor(author);\n    if (author === false) return [];\n\n    return getAuthor(themeLocale.value.author, false);\n  });\n};\n\nexport type CategoryRef = ComputedRef<PageCategory[]>;\n\nexport const useArticleCategory = (info: Ref<ArticleInfoData>): CategoryRef => {\n  const categoryMap = useCategoryMap();\n\n  return computed(() =>\n    getCategory(info.value.category).map((name) => ({\n      name,\n      path: categoryMap.value.map[name].path,\n    })),\n  );\n};\n\nexport type TagRef = ComputedRef<PageTag[]>;\n\nexport const useArticleTag = (info: Ref<ArticleInfoData>): TagRef => {\n  const tagMap = useTagMap();\n\n  return computed(() =>\n    getTag(info.value.tag).map((name) => ({\n      name,\n      path: tagMap.value.map[name].path,\n    })),\n  );\n};\n\nexport type DateRef = ComputedRef<Date | null>;\n\nexport const useArticleDate = (info: Ref<ArticleInfoData>): DateRef =>\n  computed(() => {\n    const { [\"date\"]: timestamp } = info.value;\n\n    return getDate(timestamp);\n  });\n\nexport const useArticleInfo = (props: {\n  info: ArticleInfoData;\n  path: string;\n}): {\n  info: ComputedRef<PageInfoProps>;\n  items: ComputedRef<PageInfoType[] | false | null>;\n} => {\n  const articleInfo = toRef(props, \"info\");\n  const blogOptions = useBlogOptions();\n  const author = useArticleAuthor(articleInfo);\n  const category = useArticleCategory(articleInfo);\n  const tag = useArticleTag(articleInfo);\n  const date = useArticleDate(articleInfo);\n  const readingTimeLocaleConfig = useReadingTimeLocaleConfig();\n\n  const info = computed(() => ({\n    author: author.value,\n    category: category.value,\n    date: date.value,\n    tag: tag.value,\n    isOriginal: articleInfo.value.isOriginal ?? false,\n    readingTime: articleInfo.value.readingTime ?? null,\n    readingTimeLocale:\n      articleInfo.value.readingTime && readingTimeLocaleConfig.value\n        ? getReadingTimeLocale(\n            articleInfo.value.readingTime,\n            readingTimeLocaleConfig.value,\n          )\n        : null,\n    pageview: props.path,\n  }));\n\n  const items = computed(() => blogOptions.value.articleInfo ?? null);\n\n  return { info, items };\n};\n"]}