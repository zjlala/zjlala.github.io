{"version":3,"file":"PasswordModal.js","sourceRoot":"","sources":["../../../../src/client/components/encrypt/PasswordModal.ts"],"names":[],"mappings":"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","sourcesContent":["import type { VNode } from \"vue\";\nimport { computed, defineComponent, h, nextTick, ref } from \"vue\";\n\nimport PageTitle from \"@theme-hope/components/base/PageTitle\";\nimport LockIcon from \"@theme-hope/components/encrypt/LockIcon\";\nimport { useData } from \"@theme-hope/composables/useData\";\n\nimport \"../../styles/encrypt/password-modal.scss\";\n\nexport default defineComponent({\n  name: \"PasswordModal\",\n\n  props: {\n    /**\n     * Password hint\n     */\n    hint: String,\n\n    /**\n     * Whether is fullscreen\n     *\n     * 是否是全屏\n     */\n    full: Boolean,\n\n    /**\n     * Whether to show title\n     *\n     * 是否显示标题\n     */\n    showTitle: Boolean,\n  },\n\n  emits: [\"verify\"],\n\n  setup(props, { emit }) {\n    const { frontmatter, themeLocale } = useData();\n    const password = ref(\"\");\n    const hasTried = ref(false);\n    const remember = ref(false);\n\n    const encryptLocale = computed(() => themeLocale.value.encryptLocales);\n\n    let hintHandler: number | null = null;\n\n    const verify = (): void => {\n      // Clear previous handler\n      if (hintHandler) clearTimeout(hintHandler);\n      hasTried.value = false;\n\n      emit(\"verify\", password.value, remember.value);\n\n      void nextTick().then(() => {\n        hasTried.value = true;\n\n        hintHandler = setTimeout(() => {\n          hasTried.value = false;\n        }, 1000) as unknown as number;\n      });\n    };\n\n    return (): VNode =>\n      h(\n        \"div\",\n        {\n          class: [\n            \"vp-decrypt-layer\",\n            { expand: props.full || frontmatter.value.home },\n          ],\n        },\n        [\n          props.showTitle ? h(PageTitle) : null,\n          h(\"div\", { class: \"vp-decrypt-modal\" }, [\n            h(\n              \"div\",\n              { class: [\"vp-decrypt-hint\", { tried: hasTried.value }] },\n              hasTried.value\n                ? encryptLocale.value.errorHint\n                : h(LockIcon, { \"aria-label\": encryptLocale.value.iconLabel }),\n            ),\n            props.hint\n              ? h(\"div\", { class: \"vp-decrypt-hint\" }, props.hint)\n              : null,\n            h(\"div\", { class: \"vp-decrypt-input\" }, [\n              h(\"input\", {\n                type: \"password\",\n                value: password.value,\n                placeholder: encryptLocale.value.placeholder,\n                onInput: ({ target }: InputEvent) => {\n                  password.value = (target as HTMLInputElement).value;\n                },\n                onKeydown: ({ key }: KeyboardEvent) => {\n                  if (key === \"Enter\") verify();\n                },\n              }),\n            ]),\n            h(\"div\", { class: \"vp-remember-password\" }, [\n              h(\"input\", {\n                id: \"remember-password\",\n                type: \"checkbox\",\n                value: remember.value,\n                onChange: () => {\n                  remember.value = !remember.value;\n                },\n              }),\n              h(\n                \"label\",\n                { for: \"remember-password\" },\n                encryptLocale.value.remember,\n              ),\n            ]),\n            h(\n              \"button\",\n              {\n                type: \"button\",\n                class: \"vp-decrypt-submit\",\n                onClick: () => {\n                  verify();\n                },\n              },\n              \"OK\",\n            ),\n          ]),\n        ],\n      );\n  },\n});\n"]}