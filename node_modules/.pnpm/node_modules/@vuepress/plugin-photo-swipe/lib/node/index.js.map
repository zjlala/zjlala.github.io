{"version":3,"file":"index.js","sources":["../../src/node/locales.ts","../../src/node/logger.ts","../../src/node/photoSwipePlugin.ts"],"sourcesContent":["import type { DefaultLocaleInfo } from '@vuepress/helper'\nimport type { PhotoSwipePluginLocaleData } from '../shared/index.js'\n\n/**\n * Default locale info for PhotoSwipe plugin\n *\n * PhotoSwipe 插件的默认多语言信息\n */\nexport const photoSwipeLocaleInfo: DefaultLocaleInfo<PhotoSwipePluginLocaleData> =\n  [\n    [\n      ['en', 'en-US'],\n      {\n        close: 'Close',\n        download: 'Download Image',\n        fullscreen: 'Switch to fullscreen',\n        zoom: 'Zoom in/out',\n        arrowPrev: 'Prev (Arrow Left)',\n        arrowNext: 'Next (Arrow Right)',\n      },\n    ],\n    [\n      ['zh', 'zh-CN', 'zh-Hans'],\n      {\n        close: '关闭',\n        download: '下载图片',\n        fullscreen: '切换全屏',\n        zoom: '缩放',\n        arrowPrev: '上一个 (左箭头)',\n        arrowNext: '下一个 (右箭头)',\n      },\n    ],\n    [\n      ['zh-TW', 'zh-Hant'],\n      {\n        close: '關閉',\n        download: '下載圖片',\n        fullscreen: '切換全屏',\n        zoom: '縮放',\n        arrowPrev: '上一個 (左箭頭)',\n        arrowNext: '下一個 (右箭頭)',\n      },\n    ],\n    [\n      ['de', 'de-DE'],\n      {\n        close: 'Schließen',\n        download: 'Download',\n        fullscreen: 'Vollbild aktivieren',\n        zoom: 'Rein / rauszoomen',\n        arrowPrev: 'Zurück (Pfeil links)',\n        arrowNext: 'Weiter (Pfeil rechts)',\n      },\n    ],\n    [\n      ['vi', 'vi-VN'],\n      {\n        close: 'Đóng',\n        download: 'download',\n        fullscreen: 'Bật chế độ toàn màn hình',\n        zoom: 'Phóng to / thu nhỏ',\n        arrowPrev: 'Trước (Mũi tên trái)',\n        arrowNext: 'Tiếp theo (Mũi tên Phải)',\n      },\n    ],\n    [\n      ['uk'],\n      {\n        close: 'Закрити',\n        download: 'Завантажити зображення',\n        fullscreen: 'Перейти на повний екран',\n        zoom: 'Збільшити/Зменшити',\n        arrowPrev: 'Попередня (Стрілка вліво)',\n        arrowNext: 'Далі (стрілка вправо)',\n      },\n    ],\n    [\n      ['ru', 'ru-RU'],\n      {\n        close: 'Закрыть',\n        download: 'Загрузить изображение',\n        fullscreen: 'Переключиться на полный экран',\n        zoom: 'Увеличить/Уменьшить',\n        arrowPrev: 'Предыдущая (Стрелка влево)',\n        arrowNext: 'Следующая (Стрелка вправо)',\n      },\n    ],\n    [\n      ['br'],\n      {\n        close: 'Fechar',\n        download: 'Baixar imagem',\n        fullscreen: 'Alternar para tela cheia',\n        zoom: 'Aproximar mais/menos',\n        arrowPrev: 'Anterior (Seta Esquerda)',\n        arrowNext: 'Próximo (Seta Direita)',\n      },\n    ],\n    [\n      ['pl', 'pl-PL'],\n      {\n        close: 'Zamknij',\n        download: 'Pobierz obraz',\n        fullscreen: 'Przełącz na pełny ekran',\n        zoom: 'Powiększ/pomniejsz',\n        arrowPrev: 'Poprzedni (strzałka w lewo)',\n        arrowNext: 'Następny (strzałka w prawo)',\n      },\n    ],\n    [\n      ['sk', 'sk-SK'],\n      {\n        close: 'Zatvor',\n        download: 'Stiahni obrázok',\n        fullscreen: 'Prepni na celú obrazovku',\n        zoom: 'Priblíž/Oddial',\n        arrowPrev: 'Predošlí (šípka doľava)',\n        arrowNext: 'Nasledujúci (šípka doprava)',\n      },\n    ],\n    [\n      ['fr', 'fr-FR'],\n      {\n        close: 'Fermer',\n        download: \"Télécharger l'image\",\n        fullscreen: 'Basculer en plein écran',\n        zoom: 'Zoom avant/arrière',\n        arrowPrev: 'Précédent (Flèche gauche)',\n        arrowNext: 'Suivant (Flèche droite)',\n      },\n    ],\n    [\n      ['es', 'es-ES'],\n      {\n        close: 'Cerrar',\n        download: 'Descargar imagen',\n        fullscreen: 'Cambiar a pantalla completa',\n        zoom: 'Acercar/Alejar',\n        arrowPrev: 'Anterior (Flecha izquierda)',\n        arrowNext: 'Siguiente (Flecha derecha)',\n      },\n    ],\n    [\n      ['ja', 'ja-JP'],\n      {\n        close: '閉じる',\n        download: '画像ダウンロード',\n        fullscreen: '全画面表示への切り替え',\n        zoom: '拡大・縮小',\n        arrowPrev: '前へ（左矢印）',\n        arrowNext: '次へ（右矢印）',\n      },\n    ],\n    [\n      ['tr', 'tr-TR'],\n      {\n        close: 'Kapat',\n        download: 'Resmi indir',\n        fullscreen: 'Tam ekrana geç',\n        zoom: 'Yakınlaştır/Uzaklaştır',\n        arrowPrev: 'Önceki (Sol ok)',\n        arrowNext: 'Sonraki (Sağ ok)',\n      },\n    ],\n    [\n      ['ko', 'ko-KO'],\n      {\n        close: '닫기',\n        download: '이미지 다운로드',\n        fullscreen: '전체 화면 전환',\n        zoom: '확대/축소',\n        arrowPrev: '이전 (왼쪽 화살표)',\n        arrowNext: '다음 (오른쪽 화살표)',\n      },\n    ],\n    [\n      ['fi', 'fi-FI'],\n      {\n        close: 'Sulje',\n        download: 'Lataa kuva',\n        fullscreen: 'Vaihda kokoruututilaan',\n        zoom: 'Lähennä/Työnnä',\n        arrowPrev: 'Edellinen (Vasen nuoli)',\n        arrowNext: 'Seuraava (Oikea nuoli)',\n      },\n    ],\n    [\n      ['hu', 'hu-HU'],\n      {\n        close: 'Bezárás',\n        download: 'Kép letöltése',\n        fullscreen: 'Váltás teljes képernyőre',\n        zoom: 'Nagyítás/kicsinyítés',\n        arrowPrev: 'Előző (Balra nyíl)',\n        arrowNext: 'Következő (Jobbra nyíl)',\n      },\n    ],\n    [\n      ['id', 'id-ID'],\n      {\n        close: 'Tutup',\n        download: 'Unduh gambar',\n        fullscreen: 'Beralih ke layar penuh',\n        zoom: 'Perbesar/Perkecil',\n        arrowPrev: 'Sebelumnya (Panah kiri)',\n        arrowNext: 'Selanjutnya (Panah kanan)',\n      },\n    ],\n    [\n      ['nl', 'nl-NL'],\n      {\n        close: 'Sluiten',\n        download: 'Download afbeelding',\n        fullscreen: 'Schakel naar volledig scherm',\n        zoom: 'In-/uitzoomen',\n        arrowPrev: 'Vorige (Pijl Links)',\n        arrowNext: 'Volgende (Pijl Rechts)',\n      },\n    ],\n  ]\n","import { Logger } from '@vuepress/helper'\n\nexport const PLUGIN_NAME = '@vuepress/plugin-photo-swipe'\n\nexport const logger = new Logger(PLUGIN_NAME)\n","import {\n  addViteOptimizeDepsExclude,\n  addViteSsrNoExternal,\n  entries,\n  fromEntries,\n  getFullLocaleConfig,\n} from '@vuepress/helper'\nimport type { PluginFunction } from 'vuepress/core'\nimport { getDirname, path } from 'vuepress/utils'\nimport { photoSwipeLocaleInfo } from './locales.js'\nimport { PLUGIN_NAME, logger } from './logger.js'\nimport type { PhotoSwipePluginOptions } from './options.js'\n\nconst __dirname = import.meta.dirname || getDirname(import.meta.url)\n\n/**\n * VuePress PhotoSwipe plugin\n *\n * VuePress PhotoSwipe 插件\n *\n * @param [options={}] - Plugin options / 插件选项\n *\n * @example\n * ```ts\n * import { photoSwipePlugin } from '@vuepress/plugin-photo-swipe'\n *\n * export default {\n *   plugins: [\n *     photoSwipePlugin({\n *       selector: '[vp-content] :not(a) > img:not([no-view])',\n *       download: true,\n *       fullscreen: true,\n *       scrollToClose: true,\n *     }),\n *   ],\n * }\n * ```\n */\nexport const photoSwipePlugin =\n  (options: PhotoSwipePluginOptions = {}): PluginFunction =>\n  (app) => {\n    if (app.env.isDebug) logger.info('Options:', options)\n\n    return {\n      name: PLUGIN_NAME,\n\n      define: (): Record<string, unknown> => ({\n        __PS_SELECTOR__:\n          options.selector || '[vp-content] :not(a) > img:not([no-view])',\n        __PS_DOWNLOAD__: options.download ?? true,\n        __PS_FULLSCREEN__: options.fullscreen ?? true,\n        __PS_SCROLL_TO_CLOSE__: options.scrollToClose ?? true,\n        __PS_LOCALES__: fromEntries(\n          entries(\n            getFullLocaleConfig({\n              app,\n              name: PLUGIN_NAME,\n              default: photoSwipeLocaleInfo,\n              config: options.locales,\n            }),\n          ).map(([localePath, localeOptions]) => [\n            localePath,\n            fromEntries(\n              entries(localeOptions).map(([key, value]) => [\n                `${key}Title`,\n                value,\n              ]),\n            ),\n          ]),\n        ),\n      }),\n\n      extendsBundlerOptions: (bundlerOptions: unknown): void => {\n        addViteOptimizeDepsExclude(bundlerOptions, app, 'photoswipe')\n        addViteSsrNoExternal(bundlerOptions, app, '@vuepress/helper')\n      },\n\n      clientConfigFile: path.resolve(__dirname, '../client/config.js'),\n    }\n  }\n"],"names":["photoSwipeLocaleInfo","PLUGIN_NAME","logger","Logger","__dirname","getDirname","photoSwipePlugin","options","app","fromEntries","entries","getFullLocaleConfig","localePath","localeOptions","key","value","bundlerOptions","addViteOptimizeDepsExclude","addViteSsrNoExternal","path"],"mappings":"iNAQO,MAAMA,EACX,CACE,CACE,CAAC,KAAM,OAAO,EACd,CACE,MAAO,QACP,SAAU,iBACV,WAAY,uBACZ,KAAM,cACN,UAAW,oBACX,UAAW,oBACb,CACF,EACA,CACE,CAAC,KAAM,QAAS,SAAS,EACzB,CACE,MAAO,KACP,SAAU,OACV,WAAY,OACZ,KAAM,KACN,UAAW,YACX,UAAW,WACb,CACF,EACA,CACE,CAAC,QAAS,SAAS,EACnB,CACE,MAAO,KACP,SAAU,OACV,WAAY,OACZ,KAAM,KACN,UAAW,YACX,UAAW,WACb,CACF,EACA,CACE,CAAC,KAAM,OAAO,EACd,CACE,MAAO,YACP,SAAU,WACV,WAAY,sBACZ,KAAM,oBACN,UAAW,uBACX,UAAW,uBACb,CACF,EACA,CACE,CAAC,KAAM,OAAO,EACd,CACE,MAAO,OACP,SAAU,WACV,WAAY,2BACZ,KAAM,qBACN,UAAW,uBACX,UAAW,0BACb,CACF,EACA,CACE,CAAC,IAAI,EACL,CACE,MAAO,UACP,SAAU,yBACV,WAAY,0BACZ,KAAM,qBACN,UAAW,4BACX,UAAW,uBACb,CACF,EACA,CACE,CAAC,KAAM,OAAO,EACd,CACE,MAAO,UACP,SAAU,wBACV,WAAY,gCACZ,KAAM,sBACN,UAAW,6BACX,UAAW,4BACb,CACF,EACA,CACE,CAAC,IAAI,EACL,CACE,MAAO,SACP,SAAU,gBACV,WAAY,2BACZ,KAAM,uBACN,UAAW,2BACX,UAAW,wBACb,CACF,EACA,CACE,CAAC,KAAM,OAAO,EACd,CACE,MAAO,UACP,SAAU,gBACV,WAAY,0BACZ,KAAM,qBACN,UAAW,8BACX,UAAW,6BACb,CACF,EACA,CACE,CAAC,KAAM,OAAO,EACd,CACE,MAAO,SACP,SAAU,kBACV,WAAY,2BACZ,KAAM,iBACN,UAAW,0BACX,UAAW,6BACb,CACF,EACA,CACE,CAAC,KAAM,OAAO,EACd,CACE,MAAO,SACP,SAAU,sBACV,WAAY,0BACZ,KAAM,qBACN,UAAW,4BACX,UAAW,yBACb,CACF,EACA,CACE,CAAC,KAAM,OAAO,EACd,CACE,MAAO,SACP,SAAU,mBACV,WAAY,8BACZ,KAAM,iBACN,UAAW,8BACX,UAAW,4BACb,CACF,EACA,CACE,CAAC,KAAM,OAAO,EACd,CACE,MAAO,MACP,SAAU,WACV,WAAY,cACZ,KAAM,QACN,UAAW,UACX,UAAW,SACb,CACF,EACA,CACE,CAAC,KAAM,OAAO,EACd,CACE,MAAO,QACP,SAAU,cACV,WAAY,iBACZ,KAAM,yBACN,UAAW,kBACX,UAAW,kBACb,CACF,EACA,CACE,CAAC,KAAM,OAAO,EACd,CACE,MAAO,KACP,SAAU,WACV,WAAY,WACZ,KAAM,QACN,UAAW,cACX,UAAW,cACb,CACF,EACA,CACE,CAAC,KAAM,OAAO,EACd,CACE,MAAO,QACP,SAAU,aACV,WAAY,yBACZ,KAAM,iBACN,UAAW,0BACX,UAAW,wBACb,CACF,EACA,CACE,CAAC,KAAM,OAAO,EACd,CACE,MAAO,UACP,SAAU,gBACV,WAAY,2BACZ,KAAM,uBACN,UAAW,qBACX,UAAW,yBACb,CACF,EACA,CACE,CAAC,KAAM,OAAO,EACd,CACE,MAAO,QACP,SAAU,eACV,WAAY,yBACZ,KAAM,oBACN,UAAW,0BACX,UAAW,2BACb,CACF,EACA,CACE,CAAC,KAAM,OAAO,EACd,CACE,MAAO,UACP,SAAU,sBACV,WAAY,+BACZ,KAAM,gBACN,UAAW,sBACX,UAAW,wBACb,CACF,CACF,ECzNWC,EAAc,+BAEdC,EAAS,IAAIC,EAAOF,CAAW,ECStCG,EAAY,YAAY,SAAWC,EAAW,YAAY,GAAG,EAyBtDC,EACX,CAACC,EAAmC,CAAA,IACnCC,IACKA,EAAI,IAAI,SAASN,EAAO,KAAK,WAAYK,CAAO,EAE7C,CACL,KAAMN,EAEN,OAAQ,KAAgC,CACtC,gBACEM,EAAQ,UAAY,4CACtB,gBAAiBA,EAAQ,UAAY,GACrC,kBAAmBA,EAAQ,YAAc,GACzC,uBAAwBA,EAAQ,eAAiB,GACjD,eAAgBE,EACdC,EACEC,EAAoB,CAClB,IAAAH,EACA,KAAMP,EACN,QAASD,EACT,OAAQO,EAAQ,OAClB,CAAC,CACH,EAAE,IAAI,CAAC,CAACK,EAAYC,CAAa,IAAM,CACrCD,EACAH,EACEC,EAAQG,CAAa,EAAE,IAAI,CAAC,CAACC,EAAKC,CAAK,IAAM,CAC3C,GAAGD,CAAG,QACNC,CACF,CAAC,CACH,CACF,CAAC,CACH,CACF,GAEA,sBAAwBC,GAAkC,CACxDC,EAA2BD,EAAgBR,EAAK,YAAY,EAC5DU,EAAqBF,EAAgBR,EAAK,kBAAkB,CAC9D,EAEA,iBAAkBW,EAAK,QAAQf,EAAW,qBAAqB,CACjE"}